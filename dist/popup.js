"use strict";(()=>{var i={setCookie(o,e,n){let s="";if(n){let t=new Date;t.setTime(t.getTime()+n*24*60*60*1e3),s="; expires="+t.toUTCString(),console.log(`Set cookie: ${o}=${e}; expires=${t.toUTCString()}`)}else console.log(`Set cookie: ${o}=${e}; no expiration`);document.cookie=o+"="+(e||"")+s+"; path=/"},getCookie(o){let e=o+"=",n=document.cookie.split(";");for(let s=0;s<n.length;s++){let t=n[s];for(;t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(e)===0)return console.log(`Get cookie: ${o}=${t.substring(e.length,t.length)}`),t.substring(e.length,t.length)}return console.log(`Cookie ${o} not found`),null}},l=()=>{document.querySelector(".exit-intent-popup-desktop").classList.remove("visible"),console.log("Popup hidden")},r=o=>{o.target.className==="close"&&(l(),i.setCookie("exitIntentClosed",!0,2),console.log("Exit event triggered"))},c=o=>{let e=!o.toElement&&!o.relatedTarget&&o.clientY<10;console.log(`Mouse event detected, should show exit intent: ${e}`),e&&!i.getCookie("exitIntentClosed")&&!i.getCookie("formSubmitted")&&(document.removeEventListener("mouseout",c),document.querySelector(".exit-intent-popup-desktop").classList.add("visible"),i.setCookie("exitIntentShown",!0,2),console.log("Exit intent popup shown"))},d=()=>{let o=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=o/e*100;console.log(`Scroll event detected, scroll percent: ${n}%`),n>15&&!i.getCookie("exitIntentClosed")&&!i.getCookie("formSubmitted")&&(document.removeEventListener("scroll",d),document.querySelector(".exit-intent-popup-desktop").classList.add("visible"),i.setCookie("exitIntentShown",!0,2),console.log("Exit intent popup shown due to scroll"))};document.addEventListener("DOMContentLoaded",()=>{console.log("DOMContentLoaded event"),!i.getCookie("exitIntentClosed")&&!i.getCookie("formSubmitted")&&(setTimeout(()=>{window.innerWidth>768?(document.addEventListener("mouseout",c),document.addEventListener("click",r),console.log("Mouseout and click event listeners added for desktop")):(document.addEventListener("scroll",d),console.log("Scroll event listener added for mobile/tablet"))},2e3),setTimeout(()=>{if(!i.getCookie("exitIntentShown")&&window.innerWidth>768){let e=document.querySelector(".exit-intent-popup-desktop");e?(e.classList.add("visible"),console.log("Popup shown after 10 seconds on desktop")):console.log("Popup not found after 10 seconds")}},1e4));let o=document.querySelectorAll("[data-form-id]");console.log("Number of forms found:",o.length),o.forEach(e=>{let n=e.getAttribute("data-form-id");console.log("Checking form with ID:",n),i.getCookie(`formSubmitted_${n}`)?l():e.addEventListener("submit",s=>{i.setCookie(`formSubmitted_${n}`,!0,365),console.log(`Form ${n} submitted, popup hidden`)})}),document.querySelectorAll(".modal-continue-button, .close").forEach(e=>{e.addEventListener("click",()=>{l(),i.setCookie("exitIntentClosed",!0,2),console.log("Popup closed via button")})})});})();
